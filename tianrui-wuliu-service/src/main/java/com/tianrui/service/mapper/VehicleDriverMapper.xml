<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tianrui.service.mapper.VehicleDriverMapper" >
  <resultMap id="BaseResultMap" type="com.tianrui.service.bean.VehicleDriver" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="driverid" property="driverid" jdbcType="VARCHAR" />
    <result column="vehicleid" property="vehicleid" jdbcType="VARCHAR" />
    <result column="vehicleno" property="vehicleno" jdbcType="VARCHAR" />
    <result column="vehicleTypeName" property="vehicletypename" jdbcType="VARCHAR" />
    <result column="vehicleremark" property="vehicleremark" jdbcType="VARCHAR" />
    <result column="drivername" property="drivername" jdbcType="VARCHAR" />
    <result column="drivertel" property="drivertel" jdbcType="VARCHAR" />
    <result column="driverremark" property="driverremark" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="creatTime" property="createtime" jdbcType="BIGINT" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, driverid, vehicleid, vehicleno, vehicleTypeName, vehicleremark, drivername, drivertel, 
    driverremark, creator, creatTime
  </sql>
  <resultMap id="BaseResultMaps" type="com.tianrui.service.bean.VehicleDriverMember" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="driverid" property="driverid" jdbcType="VARCHAR" />
    <result column="vehicleid" property="vehicleid" jdbcType="VARCHAR" />
    <result column="vehicleno" property="vehicleno" jdbcType="VARCHAR" />
    <result column="vehicleTypeName" property="vehicletypename" jdbcType="VARCHAR" />
    <result column="vehicleremark" property="vehicleremark" jdbcType="VARCHAR" />
    <result column="drivername" property="drivername" jdbcType="VARCHAR" />
    <result column="drivertel" property="drivertel" jdbcType="VARCHAR" />
    <result column="driverremark" property="driverremark" jdbcType="VARCHAR" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="creatTime" property="createtime" jdbcType="BIGINT" />
    <result column="desc1" property="desc1" jdbcType="VARCHAR" />
    <result column="aldriverid" property="aldriverid" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Columns" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, driverid, vehicleid, vehicleno, vehicleTypeName, vehicleremark, drivername, drivertel, 
    driverremark, creator, creatTime, desc1, aldriverid
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from wuliu_vehicle_driver
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <select id="findWithEntity" resultMap="BaseResultMap" parameterType="com.tianrui.service.bean.VehicleDriver" >
    select 
    <include refid="Base_Column_List" />
    from wuliu_vehicle_driver
    	<where>
    	      <if test="creator != null and creator != ''" >
		       	and  creator =#{creator,jdbcType=VARCHAR}
		      </if>
    	</where>
  </select>
  <select id="findList" resultMap="BaseResultMaps" parameterType="com.tianrui.service.bean.VehicleDriverMember" >
    select 
    	v.id,v.driverid,v.vehicleid,v.vehicleno,v.vehicleTypeName,v.vehicleremark,v.drivername,v.drivertel,
    	v.driverremark,v.creator,v.creatTime,w.desc1,m.aldriverid
      from  wuliu_vehicle_driver  v
	  LEFT JOIN wuliu_member_vehicle w ON  v.vehicleid=w.vehicleid
	  LEFT JOIN member m ON m.id= v.driverid
   	<where>1=1
   	  <if test="vehicleno != null  and vehicleno !='' " >
       and (v.vehicleno like "%" #{vehicleno,jdbcType=VARCHAR} "%")
      </if>
 	  <if test="drivername != null  and drivername !='' " >
     	and (v.drivername like "%" #{drivername,jdbcType=VARCHAR} "%")
      </if>
      <if test="drivertel != null  and drivertel !='' " >
     	and (v.drivertel like "%" #{drivertel,jdbcType=VARCHAR} "%")
      </if>
      <if test="desc1 == 1  " >
     	and w.desc1 ='1' 
      </if>
      <if test="desc1 == 3  " >
     	and (w.`desc1` != '1' OR w.`desc1` IS NULL)  
      </if>
     
   		order by creatTime desc
   		<if test="start != null and start != 0 and limit != null">
	    limit #{start,jdbcType=INTEGER},#{limit,jdbcType=INTEGER}
      </if>
      <if test="start == 0 and limit != null">
	    limit #{limit,jdbcType=INTEGER}
      </if>
  	</where> 
  </select>
   <select id="findListCount" resultType="long" parameterType="com.tianrui.service.bean.VehicleDriverMember" >
    select 
        count(*)
      from wuliu_vehicle_driver  v
	  LEFT JOIN wuliu_member_vehicle w ON  v.vehicleid=w.vehicleid
	  LEFT JOIN member m ON m.id= v.driverid
   	<where>1=1
	   	<if test="vehicleno != null  and vehicleno !='' " >
	       and (v.vehicleno like "%" #{vehicleno,jdbcType=VARCHAR} "%")
	      </if>
	 	  <if test="drivername != null  and drivername !='' " >
	     	and (v.drivername like "%" #{drivername,jdbcType=VARCHAR} "%")
	      </if>
	      <if test="drivertel != null  and drivertel !='' " >
	     	and (v.drivertel like "%" #{drivertel,jdbcType=VARCHAR} "%")
	      </if>
	      <if test="desc1 == 1  " >
	     	and w.desc1 ='1' 
	      </if>
	      <if test="desc1 == 3  " >
	     	and (w.`desc1` != '1' OR w.`desc1` IS NULL) 
	      </if>
	     
	     
	   		order by creatTime desc
	   	
   	</where>
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from wuliu_vehicle_driver
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.tianrui.service.bean.VehicleDriver" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into wuliu_vehicle_driver (id, driverid, vehicleid, 
      vehicleno, vehicleTypeName, vehicleremark, 
      drivername, drivertel, driverremark, 
      creator, creatTime)
    values (#{id,jdbcType=VARCHAR}, #{driverid,jdbcType=VARCHAR}, #{vehicleid,jdbcType=VARCHAR}, 
      #{vehicleno,jdbcType=VARCHAR}, #{vehicletypename,jdbcType=VARCHAR}, #{vehicleremark,jdbcType=VARCHAR}, 
      #{drivername,jdbcType=VARCHAR}, #{drivertel,jdbcType=VARCHAR}, #{driverremark,jdbcType=VARCHAR}, 
      #{creator,jdbcType=VARCHAR}, #{createtime,jdbcType=BIGINT})
  </insert>
  <insert id="insertSelective" parameterType="com.tianrui.service.bean.VehicleDriver" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into wuliu_vehicle_driver
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="driverid != null" >
        driverid,
      </if>
      <if test="vehicleid != null" >
        vehicleid,
      </if>
      <if test="vehicleno != null" >
        vehicleno,
      </if>
      <if test="vehicletypename != null" >
        vehicleTypeName,
      </if>
      <if test="vehicleremark != null" >
        vehicleremark,
      </if>
      <if test="drivername != null" >
        drivername,
      </if>
      <if test="drivertel != null" >
        drivertel,
      </if>
      <if test="driverremark != null" >
        driverremark,
      </if>
      <if test="creator != null" >
        creator,
      </if>
      <if test="createtime != null" >
        creatTime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="driverid != null" >
        #{driverid,jdbcType=VARCHAR},
      </if>
      <if test="vehicleid != null" >
        #{vehicleid,jdbcType=VARCHAR},
      </if>
      <if test="vehicleno != null" >
        #{vehicleno,jdbcType=VARCHAR},
      </if>
      <if test="vehicletypename != null" >
        #{vehicletypename,jdbcType=VARCHAR},
      </if>
      <if test="vehicleremark != null" >
        #{vehicleremark,jdbcType=VARCHAR},
      </if>
      <if test="drivername != null" >
        #{drivername,jdbcType=VARCHAR},
      </if>
      <if test="drivertel != null" >
        #{drivertel,jdbcType=VARCHAR},
      </if>
      <if test="driverremark != null" >
        #{driverremark,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        #{createtime,jdbcType=BIGINT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.tianrui.service.bean.VehicleDriver" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update wuliu_vehicle_driver
    <set >
      <if test="driverid != null" >
        driverid = #{driverid,jdbcType=VARCHAR},
      </if>
      <if test="vehicleid != null" >
        vehicleid = #{vehicleid,jdbcType=VARCHAR},
      </if>
      <if test="vehicleno != null" >
        vehicleno = #{vehicleno,jdbcType=VARCHAR},
      </if>
      <if test="vehicletypename != null" >
        vehicleTypeName = #{vehicletypename,jdbcType=VARCHAR},
      </if>
      <if test="vehicleremark != null" >
        vehicleremark = #{vehicleremark,jdbcType=VARCHAR},
      </if>
      <if test="drivername != null" >
        drivername = #{drivername,jdbcType=VARCHAR},
      </if>
      <if test="drivertel != null" >
        drivertel = #{drivertel,jdbcType=VARCHAR},
      </if>
      <if test="driverremark != null" >
        driverremark = #{driverremark,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        creator = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        creatTime = #{createtime,jdbcType=BIGINT},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.tianrui.service.bean.VehicleDriver" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update wuliu_vehicle_driver
    set driverid = #{driverid,jdbcType=VARCHAR},
      vehicleid = #{vehicleid,jdbcType=VARCHAR},
      vehicleno = #{vehicleno,jdbcType=VARCHAR},
      vehicleTypeName = #{vehicletypename,jdbcType=VARCHAR},
      vehicleremark = #{vehicleremark,jdbcType=VARCHAR},
      drivername = #{drivername,jdbcType=VARCHAR},
      drivertel = #{drivertel,jdbcType=VARCHAR},
      driverremark = #{driverremark,jdbcType=VARCHAR},
      creator = #{creator,jdbcType=VARCHAR},
      creatTime = #{createtime,jdbcType=BIGINT}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  
  <!-- 根据条件进行车主中司机车辆信息查询 -->
  <select id="selectMyVehiDriverByCondition" resultMap="BaseResultMap" parameterType="com.tianrui.service.bean.VehicleDriver" >
    select 
    <include refid="Base_Column_List" />
      from wuliu_vehicle_driver
   	<where>
   	  <if test="id != null and id != ''" >
        and id = #{id,jdbcType=VARCHAR}
      </if>
   	  <if test="driverid != null and driverid != ''" >
        and driverid = #{driverid,jdbcType=VARCHAR}
      </if>
      <if test="vehicleid != null and vehicleid != ''" >
        and vehicleid = #{vehicleid,jdbcType=VARCHAR}
      </if>
      <if test="vehicleno != null and vehicleno != ''" >
        and vehicleno = #{vehicleno,jdbcType=VARCHAR}
      </if>
      <if test="vehicletypename != null and vehicletypename != ''" >
        and vehicleTypeName = #{vehicletypename,jdbcType=VARCHAR}
      </if>
      <if test="vehicleremark != null and vehicleremark != ''" >
        and vehicleremark = #{vehicleremark,jdbcType=VARCHAR}
      </if>
      <if test="drivername != null and drivername != ''" >
        and drivername = #{drivername,jdbcType=VARCHAR}
      </if>
      <if test="drivertel != null and drivertel != ''" >
        and drivertel = #{drivertel,jdbcType=VARCHAR}
      </if>
      <if test="driverremark != null and driverremark != ''" >
        and driverremark = #{driverremark,jdbcType=VARCHAR}
      </if>
      <if test="creator != null and creator != ''" >
        and creator = #{creator,jdbcType=VARCHAR}
      </if>
      <if test="createtime != null and createtime != ''" >
        and creatTime = #{createtime,jdbcType=BIGINT}
      </if>
      <if test="queryKey != null and queryKey != ''" >
        and (drivertel like concat(#{queryKey},'%')  or drivername like concat(#{queryKey},'%') or vehicleno like concat(#{queryKey},'%'))
      </if>
   	</where>
   	  <if test="start != null and start != 0 and limit != null">
	    limit #{start,jdbcType=INTEGER},#{limit,jdbcType=INTEGER}
      </if>
      <if test="start == 0 and limit != null">
	    limit #{limit,jdbcType=INTEGER}
      </if>
  </select>
  
  <!-- 根据条件进行车主中司机车辆数据总数查询 -->
  <select id="selectCountByCondition" resultType="long" parameterType="com.tianrui.service.bean.VehicleDriver" >
    select 
        count(*)
      from wuliu_vehicle_driver
   	<where>
   	  <if test="id != null and id != ''" >
        and id = #{id,jdbcType=VARCHAR}
      </if>
   	  <if test="driverid != null and driverid != ''" >
        and driverid = #{driverid,jdbcType=VARCHAR}
      </if>
      <if test="vehicleid != null and vehicleid != ''" >
        and vehicleid = #{vehicleid,jdbcType=VARCHAR}
      </if>
      <if test="vehicleno != null and vehicleno != ''" >
        and vehicleno = #{vehicleno,jdbcType=VARCHAR}
      </if>
      <if test="vehicletypename != null and vehicletypename != ''" >
        and vehicleTypeName = #{vehicletypename,jdbcType=VARCHAR}
      </if>
      <if test="vehicleremark != null and vehicleremark != ''" >
        and vehicleremark = #{vehicleremark,jdbcType=VARCHAR}
      </if>
      <if test="drivername != null and drivername != ''" >
        and drivername = #{drivername,jdbcType=VARCHAR}
      </if>
      <if test="drivertel != null and drivertel != ''" >
        and drivertel = #{drivertel,jdbcType=VARCHAR}
      </if>
      <if test="driverremark != null and driverremark != ''" >
        and driverremark = #{driverremark,jdbcType=VARCHAR}
      </if>
      <if test="creator != null and creator != ''" >
        and creator = #{creator,jdbcType=VARCHAR}
      </if>
      <if test="createtime != null and createtime != ''" >
        and creatTime = #{createtime,jdbcType=BIGINT}
      </if>
        <if test="queryKey != null and queryKey != ''" >
        and (drivertel like concat(#{queryKey},'%')  or drivername like concat(#{queryKey},'%') or vehicleno like concat(#{queryKey},'%'))
      </if>
   	</where>
  </select>
</mapper>