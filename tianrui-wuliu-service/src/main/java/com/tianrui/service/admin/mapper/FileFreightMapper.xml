<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tianrui.service.admin.mapper.FileFreightMapper" >
  <resultMap id="BaseResultMap" type="com.tianrui.service.admin.bean.FileFreight" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" property="id" jdbcType="VARCHAR" />
    <result column="organizationname" property="organizationname" jdbcType="VARCHAR" />
    <result column="organizationid" property="organizationid" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="VARCHAR" />
    <result column="cargoid" property="cargoid" jdbcType="VARCHAR" />
    <result column="measure" property="measure" jdbcType="VARCHAR" />
    <result column="routeid" property="routeid" jdbcType="VARCHAR" />
    <result column="priceUnits" property="priceunits" jdbcType="VARCHAR" />
    <result column="price" property="price" jdbcType="DOUBLE" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="createtime" property="createtime" jdbcType="BIGINT" />
    <result column="modifier" property="modifier" jdbcType="VARCHAR" />
    <result column="modifytime" property="modifytime" jdbcType="BIGINT" />
    <result column="count" property="count" jdbcType="VARCHAR" />
    <result column="freightName" property="freightName" jdbcType="VARCHAR" />
    <!-- 
    <result column="freightType" property="freightType" jdbcType="VARCHAR" />
     -->
    <result column="auditstatus" property="auditstatus" jdbcType="VARCHAR" />
    <result column="auditreason" property="auditreason" jdbcType="VARCHAR" />
    <result column="tallage" property="tallage" jdbcType="DOUBLE" />
    <result column="taketime" property="taketime" jdbcType="BIGINT" />
    <result column="DESC1" property="desc1" jdbcType="VARCHAR" />
    <result column="DESC2" property="desc2" jdbcType="VARCHAR" />
    <result column="DESC3" property="desc3" jdbcType="VARCHAR" />
    <result column="DESC4" property="desc4" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ID, organizationname, organizationid, status, cargoid, measure, routeid, priceUnits,taketime,
    price,freightName,auditstatus,auditreason,freightType,tallage, creator, createtime, modifier, modifytime, DESC1, DESC2, DESC3, DESC4
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from file_freight
    where ID = #{id,jdbcType=VARCHAR}
  </select>
 	
 	
 	<!-- 多表联合查询 -->
  <select id="selectByKey" resultType="com.tianrui.service.admin.bean.Freight" parameterType="java.lang.String" >
 	SELECT
		f.ID id,
		f.price price,
		f.priceUnits priceUnits,
		c.cargoname cargoname,
		c.cargono cargono,
		r.dAddr dAddr,
		r.oAddr oAddr,
		r.receivePersion receivePersion,
		r.sendPersion sendPersion,
		r.distance distance,
		f.routeid routeid,
		f.cargoid cargoid,
		f.desc1 desc1,
		f.desc2 desc2,
		f.measure measureName
	FROM
		file_freight f
	LEFT JOIN file_org_cargo c ON f.cargoid = c.ID
	LEFT JOIN file_route r ON f.routeid = r.ID
	WHERE 
	f.ID = #{id,jdbcType=VARCHAR}
  </select>
  
   <!--根据名称精确查询 -->
  <select id="findByName" resultMap="BaseResultMap" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    select 
    <include refid="Base_Column_List" />
    from file_freight
    where 1=1 
    <if test="freightName != null and freightName != ''" >
    	and freightName = #{freightName,jdbcType=VARCHAR}
    </if>
     	and status != 2
  </select>
  <!--查询/前台使用 -->
  <select id="findByEntity" resultMap="BaseResultMap" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    select 
    	f.ID ID,
    	f.organizationname organizationname,
		f.freightName freightName,
		f.status status, 
		f.price price,
		f.priceUnits priceunits,
		f.cargoid cargoid,
		f.routeid routeid,
		c.status cStatus,
		r.status rStatus,
		f.tallage tallage,
		f.organizationname organizationname 
	FROM
		file_freight f 
	LEFT JOIN file_org_cargo c ON c.ID = f.cargoid
	LEFT JOIN file_route r ON r.ID = f.routeid
    where 1=1 and f.status != 2	
     <if test="id != null and id != ''">
     	and f.id = #{id,jdbcType=VARCHAR}
     </if>	
     <if test="organizationid != null and organizationid != ''">
    	and f.organizationid = #{organizationid,jdbcType=VARCHAR}
     </if>
     <if test="auditstatus != null and auditstatus != ''">
     	and f.auditstatus = #{auditstatus,jdbcType=VARCHAR}
     </if>
     <if test="cStatus != null and cStatus != ''">
     	and c.status = #{cStatus,jdbcType=VARCHAR}
     </if>
     <if test="rStatus != null and rStatus != ''">
     	and r.status = #{rStatus,jdbcType=VARCHAR}
     </if>
     <if test="routeid != null and routeid != ''" >
        and f.routeid = #{routeid,jdbcType=VARCHAR}
     </if>
     <if test="cargoid != null and cargoid !=''" >
        and f.cargoid = #{cargoid,jdbcType=VARCHAR}
     </if>
     <if test="status != null and status !=''">
     	and f.status = #{status,jdbcType=VARCHAR}
     </if>
     order by f.createtime desc
  </select>
  <!-- 查询可用的数据 -->
  <select id="selectByStatus" resultMap="BaseResultMap" parameterType="com.tianrui.service.admin.bean.FileFreight">
   select 
    f.ID ID, f.organizationname organizationname, f.organizationid organizationid, f.DESC1 DESC1
    from file_freight f
    LEFT JOIN file_org_cargo c ON c.ID = f.cargoid
	LEFT JOIN file_route r ON r.ID = f.routeid
    where 1=1 and c.status = '1' and r.status = 1
    	and f.organizationid = #{organizationid,jdbcType=VARCHAR}
     <if test="routeid != null and routeid != ''" >
        and f.routeid = #{routeid,jdbcType=VARCHAR}
     </if>
     <if test="cargoid != null and cargoid !=''" >
        and f.cargoid = #{cargoid,jdbcType=VARCHAR}
     </if>
     <if test="status != null and status !=''">
     	and f.status = #{status,jdbcType=VARCHAR}
     </if>
     	and f.status != 2
  </select>
  
  <select id="findByToName" resultMap="BaseResultMap" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    SELECT
    	f.ID ID,
		f.freightName freightName,
		f.status status, 
		f.tallage tallage,
		f.price price,
		f.auditstatus auditstatus,
		f.auditreason auditreason,
		f.priceUnits priceunits,
		c.cargoname cargoid,
		c.status DESC3,
		r.routename routeid,
		r.status DESC4,
		m.measureName measure,
		(select count(*) from wuliu_plan p where p.freightid = f.id) count
	FROM
		file_freight f 
	LEFT JOIN file_org_cargo c ON c.ID = f.cargoid
	LEFT JOIN file_route r ON r.ID = f.routeid
	LEFT JOIN wuliu_measure m ON m.ID = f.measure
    where 1=1 and f.status != 2	
    <if test="id != null and id != ''">
    	and f.id = #{id,jdbcType=VARCHAR} 
    </if>
    <if test="organizationid != null and organizationid != ''">
    	and f.organizationid = #{organizationid,jdbcType=VARCHAR}
    </if>
    <if test="cargoid != null and cargoid != ''" >
   		and f.cargoid in (select ID from file_org_cargo where cargoname like "%" #{cargoid,jdbcType=VARCHAR} "%")
    </if>
    <if test="routeid != null and routeid != ''" >
    	and f.routeid in (select ID from file_route where routename like "%" #{routeid,jdbcType=VARCHAR} "%")
    </if>
    <if test="freightName != null and freightName != ''" >
    	and f.freightName like "%" #{freightName,jdbcType=VARCHAR} "%"
    </if>
    <if test="desc2 != null and desc2 != ''" >
    	and f.desc2 = #{desc2,jdbcType=VARCHAR} 
    </if>
    order by f.createtime desc
    <if test="limit != null and pageSize != null">
    	limit #{limit,jdbcType=INTEGER},#{pageSize,jdbcType=INTEGER}
    </if>
  </select>
  
  <select id="findByToNameCount" resultType="long" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    SELECT
    	count(*)
	FROM
		file_freight f 
	LEFT JOIN file_org_cargo c ON c.ID = f.cargoid
	LEFT JOIN file_route r ON r.ID = f.routeid
	LEFT JOIN wuliu_measure m ON m.ID = f.measure
    where 1=1 and f.status != 2	
    <if test="organizationid != null and organizationid != ''">
    	and f.organizationid = #{organizationid,jdbcType=VARCHAR}
    </if>
    <if test="cargoid != null and cargoid != ''" >
   		and f.cargoid in (select ID from file_cargo where cargoname like "%" #{cargoid,jdbcType=VARCHAR} "%")
    </if>
    <if test="routeid != null and routeid != ''" >
    	and f.routeid in (select ID from file_route where routename like "%" #{routeid,jdbcType=VARCHAR} "%")
    </if>
    <if test="freightName != null and freightName != ''" >
    	and f.freightName like "%" #{freightName,jdbcType=VARCHAR} "%"
    </if>
    <if test="desc2 != null and desc2 != ''" >
    	and f.desc2 = #{desc2,jdbcType=VARCHAR} 
    </if>
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from file_freight
    where ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into file_freight (ID,freightName,freightType,tallage, organizationname, organizationid, 
      status, cargoid, measure, 
      routeid, priceUnits, price, 
      creator, createtime, modifier, 
      modifytime,auditstatus,auditreason, DESC1, DESC2, 
      DESC3, DESC4)
    values (#{id,jdbcType=VARCHAR},#{freightName,jdbcType=VARCHAR},#{freightType,jdbcType=VARCHAR},
     #{tallage,jdbcType=DOUBLE},
     #{organizationname,jdbcType=VARCHAR}, #{organizationid,jdbcType=VARCHAR}, 
      #{status,jdbcType=VARCHAR}, #{cargoid,jdbcType=VARCHAR}, #{measure,jdbcType=VARCHAR}, 
      #{routeid,jdbcType=VARCHAR}, #{priceunits,jdbcType=VARCHAR}, #{price,jdbcType=DOUBLE}, 
      #{creator,jdbcType=VARCHAR}, #{createtime,jdbcType=BIGINT}, #{modifier,jdbcType=VARCHAR}, 
      #{modifytime,jdbcType=BIGINT},
      #{auditstatus,jdbcType=BIGINT},
      #{auditreason,jdbcType=BIGINT},
      #{desc1,jdbcType=VARCHAR}, #{desc2,jdbcType=VARCHAR}, 
      #{desc3,jdbcType=VARCHAR}, #{desc4,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into file_freight
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        ID,
      </if>
      <if test="freightName != null" >
        freightName,
      </if>
      <if test="freightType != null" >
        freightType,
      </if>
      <if test="tallage != null" >
        tallage,
      </if>
      <if test="organizationname != null" >
        organizationname,
      </if>
      <if test="organizationid != null" >
        organizationid,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="cargoid != null" >
        cargoid,
      </if>
      <if test="measure != null" >
        measure,
      </if>
      <if test="routeid != null" >
        routeid,
      </if>
      <if test="priceunits != null" >
        priceUnits,
      </if>
      <if test="price != null" >
        price,
      </if>
      <if test="creator != null" >
        creator,
      </if>
      <if test="createtime != null" >
        createtime,
      </if>
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="modifytime != null" >
        modifytime,
      </if>
      <if test="desc1 != null" >
        DESC1,
      </if>
      <if test="desc2 != null" >
        DESC2,
      </if>
      <if test="desc3 != null" >
        DESC3,
      </if>
      <if test="desc4 != null" >
        DESC4,
      </if>
      <if test="auditstatus != null" >
        auditstatus,
      </if>
      <if test="auditreason != null" >
        auditreason,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
     <if test="freightName != null" >
        #{freightName,jdbcType=VARCHAR},
      </if>
      <if test="freightType != null" >
        #{freightType,jdbcType=VARCHAR},
      </if>
      <if test="tallage != null" >
       #{tallage,jdbcType=DOUBLE},
      </if>
      <if test="organizationname != null" >
        #{organizationname,jdbcType=VARCHAR},
      </if>
      <if test="organizationid != null" >
        #{organizationid,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="cargoid != null" >
        #{cargoid,jdbcType=VARCHAR},
      </if>
      <if test="measure != null" >
        #{measure,jdbcType=VARCHAR},
      </if>
      <if test="routeid != null" >
        #{routeid,jdbcType=VARCHAR},
      </if>
      <if test="priceunits != null" >
        #{priceunits,jdbcType=VARCHAR},
      </if>
      <if test="price != null" >
        #{price,jdbcType=DOUBLE},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        #{createtime,jdbcType=BIGINT},
      </if>
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="modifytime != null" >
        #{modifytime,jdbcType=BIGINT},
      </if>
      <if test="desc1 != null" >
        #{desc1,jdbcType=VARCHAR},
      </if>
      <if test="desc2 != null" >
        #{desc2,jdbcType=VARCHAR},
      </if>
      <if test="desc3 != null" >
        #{desc3,jdbcType=VARCHAR},
      </if>
      <if test="desc4 != null" >
        #{desc4,jdbcType=VARCHAR},
      </if>
      <if test="auditstatus != null" >
        #{auditstatus,jdbcType=VARCHAR},
      </if>
      <if test="auditreason != null" >
        #{auditreason,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    update file_freight
    <set >
      <if test="taketime != null">
      	taketime = #{taketime,jdbcType=BIGINT},
      </if>
      <if test="auditstatus != null" >
        auditstatus = #{auditstatus,jdbcType=VARCHAR},
      </if>
      <if test="auditreason != null" >
        auditreason = #{auditreason,jdbcType=VARCHAR},
      </if>
      <if test="freightName != null" >
        freightName = #{freightName,jdbcType=VARCHAR},
      </if>
      <if test="freightType != null" >
        freightType = #{freightType,jdbcType=VARCHAR},
      </if>
      <if test="tallage != null" >
        tallage = #{tallage,jdbcType=DOUBLE},
      </if>
      <if test="organizationname != null" >
        organizationname = #{organizationname,jdbcType=VARCHAR},
      </if>
      <if test="organizationid != null" >
        organizationid = #{organizationid,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=VARCHAR},
      </if>
      <if test="cargoid != null" >
        cargoid = #{cargoid,jdbcType=VARCHAR},
      </if>
      <if test="measure != null" >
        measure = #{measure,jdbcType=VARCHAR},
      </if>
      <if test="routeid != null" >
        routeid = #{routeid,jdbcType=VARCHAR},
      </if>
      <if test="priceunits != null" >
        priceUnits = #{priceunits,jdbcType=VARCHAR},
      </if>
      <if test="price != null" >
        price = #{price,jdbcType=DOUBLE},
      </if>
      <if test="creator != null" >
        creator = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        createtime = #{createtime,jdbcType=BIGINT},
      </if>
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="modifytime != null" >
        modifytime = #{modifytime,jdbcType=BIGINT},
      </if>
      <if test="desc1 != null" >
        DESC1 = #{desc1,jdbcType=VARCHAR},
      </if>
      <if test="desc2 != null" >
        DESC2 = #{desc2,jdbcType=VARCHAR},
      </if>
      <if test="desc3 != null" >
        DESC3 = #{desc3,jdbcType=VARCHAR},
      </if>
      <if test="desc4 != null" >
        DESC4 = #{desc4,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.tianrui.service.admin.bean.FileFreight" >
    update file_freight
    set organizationname = #{organizationname,jdbcType=VARCHAR},
        auditstatus = #{auditstatus,jdbcType=VARCHAR},
        auditreason = #{auditreason,jdbcType=VARCHAR},
      organizationid = #{organizationid,jdbcType=VARCHAR},
      freightName = #{freightName,jdbcType=VARCHAR},
      freightType = #{freightType,jdbcType=VARCHAR},
      tallage = #{tallage,jdbcType=DOUBLE},
      status = #{status,jdbcType=VARCHAR},
      cargoid = #{cargoid,jdbcType=VARCHAR},
      measure = #{measure,jdbcType=VARCHAR},
      routeid = #{routeid,jdbcType=VARCHAR},
      priceUnits = #{priceunits,jdbcType=VARCHAR},
      price = #{price,jdbcType=DOUBLE},
      creator = #{creator,jdbcType=VARCHAR},
      createtime = #{createtime,jdbcType=BIGINT},
      modifier = #{modifier,jdbcType=VARCHAR},
      modifytime = #{modifytime,jdbcType=BIGINT},
      DESC1 = #{desc1,jdbcType=VARCHAR},
      DESC2 = #{desc2,jdbcType=VARCHAR},
      DESC3 = #{desc3,jdbcType=VARCHAR},
      DESC4 = #{desc4,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  
  <update id="batchUpdateByPrimaryKeySelective" parameterType="com.tianrui.service.admin.bean.FileFreight" >
     update file_freight
    <set >
      <if test="auditstatus != null" >
        auditstatus = #{auditstatus,jdbcType=VARCHAR},
      </if>
      <if test="auditreason != null" >
        auditreason = #{auditreason,jdbcType=VARCHAR},
      </if>
      <if test="organizationname != null" >
        organizationname = #{organizationname,jdbcType=VARCHAR},
      </if>
      <if test="organizationid != null" >
        organizationid = #{organizationid,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=VARCHAR},
      </if>
      <if test="cargoid != null" >
        cargoid = #{cargoid,jdbcType=VARCHAR},
      </if>
      <if test="measure != null" >
        measure = #{measure,jdbcType=VARCHAR},
      </if>
      <if test="routeid != null" >
        routeid = #{routeid,jdbcType=VARCHAR},
      </if>
      <if test="priceunits != null" >
        priceUnits = #{priceunits,jdbcType=VARCHAR},
      </if>
      <if test="price != null" >
        price = #{price,jdbcType=DOUBLE},
      </if>
      <if test="creator != null" >
        creator = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createtime != null" >
        createtime = #{createtime,jdbcType=BIGINT},
      </if>
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="modifytime != null" >
        modifytime = #{modifytime,jdbcType=BIGINT},
      </if>
      <if test="desc1 != null" >
        DESC1 = #{desc1,jdbcType=VARCHAR},
      </if>
      <if test="desc2 != null" >
        DESC2 = #{desc2,jdbcType=VARCHAR},
      </if>
      <if test="desc3 != null" >
        DESC3 = #{desc3,jdbcType=VARCHAR},
      </if>
      <if test="desc4 != null" >
        DESC4 = #{desc4,jdbcType=VARCHAR},
      </if>
    </set>
    where ID in (${id})
  </update>
  <select id="selectOne" parameterType="string" resultType="com.tianrui.service.admin.bean.FileFreight">
  		select 
  		<include refid="Base_Column_List" /> 
  		from file_freight 
  		where id = #{id}
  </select>
</mapper>