<!Doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>天瑞物流</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="images/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link href="css/base.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="css/sm.css">
</head>
<body>
<!-- SUI 入口beigin-->
<div class="page-group">
    <div class="page page-current">
        <!-- 你的html代码 -->
        <header class="bar bar-nav bghead">
            <img src="images/logo.png">
            <a class="pull-right" href="#"> 登录</a>
        </header>
        <div class="content">
            <div class="buttons-tab">
                <a href="#tab1" class="tab-link active button">全部</a>
                <a href="#tab2" class="tab-link button">待付款</a>
                <a href="#tab3" class="tab-link button">待发货</a>
            </div>
            <div class="content-block">
                <div class="tabs">
                    <div id="tab1" class="tab active">
                        <div class="content-block">
                            <!-- content应该拥有"pull-to-refresh-content"类,表示启用下拉刷新 -->

                    <div id="insert" style="height: 1000px;">
                        5641210
                    </div>
                        </div>
                    </div>
                    <div id="tab2" class="tab">
                        <div class="content-block">
                            <p>This is tab 2 content</p>
                        </div>
                    </div>
                    <div id="tab3" class="tab">
                        <div class="content-block">
                            <p>This is tab 3 content</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <nav class="bar bar-tab bgbottom">
            <a class="tab-item external active" href="index.html">
                <span class="icon icon-home"></span>
                <span class="tab-label">首页</span>
            </a>
            <a class="tab-item external" href="message.html">
                <span class="icon icon-me"></span>
                <span class="tab-label">消息</span>
                <span class="badge">2</span>
            </a>
            <a class="tab-item external" href="yunli.html">
                <span class="icon icon-star"></span>
                <span class="tab-label">运力</span>
            </a>
            <a class="tab-item external" href="mine.html">
                <span class="icon icon-cart"></span>
                <span class="tab-label">我</span>
            </a>
        </nav>
    </div>
</div>



<script src="js/sm.min.js"></script>
<script src="js/jquery-1.11.1.js"></script>
<script type="text/javascript">
    var pid = 0;
    var insertText ="";


    //下拉刷新
    //文档高度
    function getDocumentTop() {
        var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;
        if (document.body) {
            bodyScrollTop = document.body.scrollTop;
        }
        if (document.documentElement) {
            documentScrollTop = document.documentElement.scrollTop;
        }
        scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
        return scrollTop;
    }

    //可视窗口高度
    function getWindowHeight() {
        var windowHeight = 0;
        if (document.compatMode == "CSS1Compat") {
            windowHeight = document.documentElement.clientHeight;
        } else {
            windowHeight = document.body.clientHeight;
        }
        return windowHeight;
    }

    //滚动条滚动高度
    function getScrollHeight() {
        var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;
        if (document.body) {
            bodyScrollHeight = document.body.scrollHeight;
        }
        if (document.documentElement) {
            documentScrollHeight = document.documentElement.scrollHeight;
        }
        scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;
        return scrollHeight;
    }

    window.onscroll = function () {
        //监听事件内容
       alert(00);
        alert(getDocumentTop());
        if(getDocumentTop() + getWindowHeight() >= getScrollHeight()){
            //当滚动条到底时,这里是触发内容
            //异步请求数据,局部刷新dom
            insertText += "<div id='tab2' class='tab'>" +
                    "<div class='content-block'><p>This is tab 2 content</p></div></div>";
            document.getElementById("insert").innerHTML=insertText;
        }
    }
</script>
</body>
</html>